<div class="dashboard-container">
  <div class="profiles-list col-xs-12 col-md-4">
    <div class="profiles-list-header">
      <span>People</span>
    </div>
    <%=
      render 'shared/profile-card',
      user: @user,
      notifications: @notifications.where(event_id: @user.events.pluck(:id)).count %>
    <% @patients.each do |patient| %>
      <%=
        render 'shared/profile-card',
        user: patient,
        notifications: @notifications.where(event_id: patient.events.pluck(:id)).count
      %>
    <% end %>
  </div>
  <div class="notifications-list col-xs-12 col-md-4">
    <div class="notifications-list-header">
      <span>Latest Notifications</span>
    </div>
    <% @notifications[0..4].each do |notification| %>
      <%= render 'shared/notification-card', notification: notification %>
    <% end %>
    <div class="notifications-list-see-more">
      <p>
        <% if @notifications.size > 5 %>
          <%= link_to "See all notifications", notifications_path %>
        <% end %>
      </p>
      <% if @notifications.empty? %>
        <p>
          <strong>Yay!</strong> ðŸŽ‰ you don't have any notifications.
        </p>
      <% end %>
    </div>
  </div>
  <div class="events-list col-xs-12 col-md-4">
    <div class="events-list-header hidden-md hidden-lg">
      <p>Schedule</p>
    </div>
    <div><%= render 'shared/calendar-day', events: @events[0..4] %></div>
    <div class="events-list-see-more">
      <% if @events.empty? %>
        <p>
          <strong>Ooh!</strong> ðŸ¤” you don't have any event today.
        </p>
        <p>
          <%= link_to "Add one in Schedule", profile_events_path(@user) %>
        </p>
      <% else %>
        <p>
          <%= link_to "See full schedule", events_path %>
        </p>
      <% end %>
    </div>
  </div>
</div>
